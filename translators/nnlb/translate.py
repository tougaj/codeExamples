#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É –∑ –±—É–¥—å-—è–∫–æ—ó –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–æ—ó –º–æ–≤–∏ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É
–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º NLLB-200-3.3B –≤—ñ–¥ Facebook
"""

from transformers import AutoTokenizer, AutoModelForSeq2SeqLM
import torch
import warnings
from typing import Optional

# –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –¥–ª—è —á–∏—Å—Ç–æ—Ç–∏ –≤–∏–≤–æ–¥—É
warnings.filterwarnings("ignore")

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ langdetect –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏
try:
    from langdetect import detect, LangDetectError
    print("üìö –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ langdetect –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏")
except ImportError:
    print("‚ùå –ü–æ–º–∏–ª–∫–∞: –£—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å langdetect –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é: pip install langdetect")
    exit(1)

class NLLBToUkrainianTranslator:
    def __init__(self):
        """–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–¥–µ–ª—ñ —Ç–∞ —Ç–æ–∫–µ–Ω—ñ–∑–∞—Ç–æ—Ä–∞"""
        print("üîß –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ NLLB-200-3.3B...")
        
        self.model_name = "facebook/nllb-200-3.3B"
        
        # –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç–æ–∫–µ–Ω—ñ–∑–∞—Ç–æ—Ä —Ç–∞ –º–æ–¥–µ–ª—å
        self.tokenizer = AutoTokenizer.from_pretrained(self.model_name)
        self.model = AutoModelForSeq2SeqLM.from_pretrained(self.model_name)
        
        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å CUDA
        self.device = "cuda" if torch.cuda.is_available() else "cpu"
        self.model.to(self.device)
        
        # –¶—ñ–ª—å–æ–≤–∞ –º–æ–≤–∞ - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞
        self.target_lang = 'ukr_Cyrl'
        
        print(f"‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ! –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ: {self.device}")
        print(f"üá∫üá¶ –¶—ñ–ª—å–æ–≤–∞ –º–æ–≤–∞: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ ({self.target_lang})")
        
    def get_language_mapping(self):
        """
        –ü–æ–≤–Ω–∏–π –º–∞–ø–ø—ñ–Ω–≥ ISO –∫–æ–¥—ñ–≤ –Ω–∞ NLLB –∫–æ–¥–∏ –¥–ª—è –º–æ–¥–µ–ª—ñ facebook/nllb-200-3.3B
        –ü—ñ–¥—Ç—Ä–∏–º—É—î 200+ –º–æ–≤ –∑ —Ä—ñ–∑–Ω–∏—Ö –º–æ–≤–Ω–∏—Ö —Å—ñ–º–µ–π —Ç–∞ –ø–∏—Å—å–º–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º
        """
        return {
            # ============ –Ñ–í–†–û–ü–ï–ô–°–¨–ö–Ü –ú–û–í–ò ============
            
            # –°–ª–æ–≤'—è–Ω—Å—å–∫—ñ –º–æ–≤–∏
            'uk': 'ukr_Cyrl',      # —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞
            'ru': 'rus_Cyrl',      # —Ä–æ—Å—ñ–π—Å—å–∫–∞
            'be': 'bel_Cyrl',      # –±—ñ–ª–æ—Ä—É—Å—å–∫–∞
            'bg': 'bul_Cyrl',      # –±–æ–ª–≥–∞—Ä—Å—å–∫–∞
            'mk': 'mkd_Cyrl',      # –º–∞–∫–µ–¥–æ–Ω—Å—å–∫–∞
            'sr': 'srp_Cyrl',      # —Å–µ—Ä–±—Å—å–∫–∞ (–∫–∏—Ä–∏–ª–∏—Ü—è)
            'hr': 'hrv_Latn',      # —Ö–æ—Ä–≤–∞—Ç—Å—å–∫–∞
            'bs': 'bos_Latn',      # –±–æ—Å–Ω—ñ–π—Å—å–∫–∞
            'me': 'cnr_Latn',      # —á–æ—Ä–Ω–æ–≥–æ—Ä—Å—å–∫–∞
            'sl': 'slv_Latn',      # —Å–ª–æ–≤–µ–Ω—Å—å–∫–∞
            'pl': 'pol_Latn',      # –ø–æ–ª—å—Å—å–∫–∞
            'cs': 'ces_Latn',      # —á–µ—Å—å–∫–∞
            'sk': 'slk_Latn',      # —Å–ª–æ–≤–∞—Ü—å–∫–∞
            
            # –ì–µ—Ä–º–∞–Ω—Å—å–∫—ñ –º–æ–≤–∏
            'en': 'eng_Latn',      # –∞–Ω–≥–ª—ñ–π—Å—å–∫–∞
            'de': 'deu_Latn',      # –Ω—ñ–º–µ—Ü—å–∫–∞
            'nl': 'nld_Latn',      # –Ω—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫–∞
            'af': 'afr_Latn',      # –∞—Ñ—Ä–∏–∫–∞–∞–Ω—Å
            'sv': 'swe_Latn',      # —à–≤–µ–¥—Å—å–∫–∞
            'da': 'dan_Latn',      # –¥–∞–Ω—Å—å–∫–∞
            'no': 'nob_Latn',      # –Ω–æ—Ä–≤–µ–∑—å–∫–∞ (–±—É–∫–º–æ–ª)
            'nn': 'nno_Latn',      # –Ω–æ—Ä–≤–µ–∑—å–∫–∞ (–Ω—é–Ω–æ—à–∫)
            'is': 'isl_Latn',      # —ñ—Å–ª–∞–Ω–¥—Å—å–∫–∞
            'fo': 'fao_Latn',      # —Ñ–∞—Ä–µ—Ä—Å—å–∫–∞
            'fy': 'fry_Latn',      # –∑–∞—Ö—ñ–¥–Ω–æ—Ñ—Ä–∏–∑—å–∫–∞
            'lb': 'ltz_Latn',      # –ª—é–∫—Å–µ–º–±—É—Ä–∑—å–∫–∞
            'yi': 'yid_Hebr',      # —ó–¥–∏—à
            
            # –†–æ–º–∞–Ω—Å—å–∫—ñ –º–æ–≤–∏
            'fr': 'fra_Latn',      # —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫–∞
            'es': 'spa_Latn',      # —ñ—Å–ø–∞–Ω—Å—å–∫–∞
            'pt': 'por_Latn',      # –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å—å–∫–∞
            'it': 'ita_Latn',      # —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∞
            'ro': 'ron_Latn',      # —Ä—É–º—É–Ω—Å—å–∫–∞
            'ca': 'cat_Latn',      # –∫–∞—Ç–∞–ª–∞–Ω—Å—å–∫–∞
            'gl': 'glg_Latn',      # –≥–∞–ª—ñ—Å—ñ–π—Å—å–∫–∞
            'eu': 'eus_Latn',      # –±–∞—Å–∫—Å—å–∫–∞
            'oc': 'oci_Latn',      # –æ–∫—Å–∏—Ç–∞–Ω—Å—å–∫–∞
            'sc': 'srd_Latn',      # —Å–∞—Ä–¥–∏–Ω—Å—å–∫–∞
            'co': 'cos_Latn',      # –∫–æ—Ä—Å–∏–∫–∞–Ω—Å—å–∫–∞
            'rm': 'roh_Latn',      # —Ä–µ—Ç–æ—Ä–æ–º–∞–Ω—Å—å–∫–∞
            'wa': 'wln_Latn',      # –≤–∞–ª–ª–æ–Ω—Å—å–∫–∞
            'ast': 'ast_Latn',     # –∞—Å—Ç—É—Ä—ñ–π—Å—å–∫–∞
            'an': 'arg_Latn',      # –∞—Ä–∞–≥–æ–Ω—Å—å–∫–∞
            'mwl': 'mwl_Latn',     # –º—ñ—Ä–∞–Ω–¥—Å—å–∫–∞
            'ext': 'ext_Latn',     # –µ–∫—Å—Ç—Ä–µ–º–∞–¥—É—Ä—Å—å–∫–∞
            
            # –ö–µ–ª—å—Ç—Å—å–∫—ñ –º–æ–≤–∏
            'ga': 'gle_Latn',      # —ñ—Ä–ª–∞–Ω–¥—Å—å–∫–∞
            'gd': 'gla_Latn',      # —à–æ—Ç–ª–∞–Ω–¥—Å—å–∫–∞ –≥–µ–ª—å—Å—å–∫–∞
            'cy': 'cym_Latn',      # –≤–∞–ª–ª—ñ–π—Å—å–∫–∞
            'br': 'bre_Latn',      # –±—Ä–µ—Ç–æ–Ω—Å—å–∫–∞
            'gv': 'glv_Latn',      # –º–µ–Ω—Å—å–∫–∞
            'kw': 'cor_Latn',      # –∫–æ—Ä–Ω—Å—å–∫–∞
            
            # –ë–∞–ª—Ç—ñ–π—Å—å–∫—ñ –º–æ–≤–∏
            'lt': 'lit_Latn',      # –ª–∏—Ç–æ–≤—Å—å–∫–∞
            'lv': 'lav_Latn',      # –ª–∞—Ç–≤—ñ–π—Å—å–∫–∞
            
            # –§—ñ–Ω–æ-—É–≥–æ—Ä—Å—å–∫—ñ –º–æ–≤–∏
            'fi': 'fin_Latn',      # —Ñ—ñ–Ω—Å—å–∫–∞
            'et': 'est_Latn',      # –µ—Å—Ç–æ–Ω—Å—å–∫–∞
            'hu': 'hun_Latn',      # —É–≥–æ—Ä—Å—å–∫–∞
            
            # –Ü–Ω—à—ñ —î–≤—Ä–æ–ø–µ–π—Å—å–∫—ñ
            'el': 'ell_Grek',      # –≥—Ä–µ—Ü—å–∫–∞
            'mt': 'mlt_Latn',      # –º–∞–ª—å—Ç—ñ–π—Å—å–∫–∞
            'sq': 'als_Latn',      # –∞–ª–±–∞–Ω—Å—å–∫–∞
            
            # ============ –ê–ó–Ü–ô–°–¨–ö–Ü –ú–û–í–ò ============
            
            # –ö–∏—Ç–∞–π—Å—å–∫–∞ –≥—Ä—É–ø–∞
            'zh': 'zho_Hans',      # –∫–∏—Ç–∞–π—Å—å–∫–∞ (—Å–ø—Ä–æ—â–µ–Ω–∞)
            'zh-cn': 'zho_Hans',   # –∫–∏—Ç–∞–π—Å—å–∫–∞ (—Å–ø—Ä–æ—â–µ–Ω–∞)
            'zh-tw': 'zho_Hant',   # –∫–∏—Ç–∞–π—Å—å–∫–∞ (—Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∞)
            'zh-hk': 'zho_Hant',   # –∫–∏—Ç–∞–π—Å—å–∫–∞ (–ì–æ–Ω–∫–æ–Ω–≥)
            'yue': 'yue_Hant',     # –∫–∞–Ω—Ç–æ–Ω—Å—å–∫–∞
            'wuu': 'wuu_Hans',     # —É (—à–∞–Ω—Ö–∞–π—Å—å–∫–∞)
            'nan': 'min_Latn',     # –º—ñ–Ω—å –Ω–∞–Ω—å
            
            # –Ø–ø–æ–Ω—Å—å–∫–∞
            'ja': 'jpn_Jpan',      # —è–ø–æ–Ω—Å—å–∫–∞
            
            # –ö–æ—Ä–µ–π—Å—å–∫–∞
            'ko': 'kor_Hang',      # –∫–æ—Ä–µ–π—Å—å–∫–∞
            
            # –í'—î—Ç–Ω–∞–º—Å—å–∫–∞
            'vi': 'vie_Latn',      # –≤'—î—Ç–Ω–∞–º—Å—å–∫–∞
            
            # –¢–∞–π—Å—å–∫–∞ –≥—Ä—É–ø–∞
            'th': 'tha_Thai',      # —Ç–∞–π—Å—å–∫–∞
            'lo': 'lao_Laoo',      # –ª–∞–æ—Å—å–∫–∞
            
            # –ë—ñ—Ä–º–∞–Ω—Å—å–∫–∞ –≥—Ä—É–ø–∞
            'my': 'mya_Mymr',      # –±—ñ—Ä–º–∞–Ω—Å—å–∫–∞
            
            # –ö—Ö–º–µ—Ä—Å—å–∫–∞
            'km': 'khm_Khmr',      # –∫—Ö–º–µ—Ä—Å—å–∫–∞
            
            # –ú–∞–ª–∞–π—Å—å–∫–∞ –≥—Ä—É–ø–∞
            'ms': 'zsm_Latn',      # –º–∞–ª–∞–π—Å—å–∫–∞
            'id': 'ind_Latn',      # —ñ–Ω–¥–æ–Ω–µ–∑—ñ–π—Å—å–∫–∞
            'jv': 'jav_Latn',      # —è–≤–∞–Ω—Å—å–∫–∞
            'su': 'sun_Latn',      # —Å—É–Ω–¥–∞–Ω—Å—å–∫–∞
            'min': 'min_Latn',     # –º—ñ–Ω–∞–Ω–≥–∫–∞–±–∞—É
            'ace': 'ace_Latn',     # –∞—á–µ—Ö—Å—å–∫–∞
            'ban': 'ban_Latn',     # –±–∞–ª—ñ–π—Å—å–∫–∞
            'bjn': 'bjn_Latn',     # –±–∞–Ω–¥–∂–∞—Ä—Å—å–∫–∞
            'bug': 'bug_Latn',     # –±—É–≥—ñ–π—Å—å–∫–∞
            'mad': 'mad_Latn',     # –º–∞–¥—É—Ä—Å—å–∫–∞
            
            # –§—ñ–ª—ñ–ø–ø—ñ–Ω—Å—å–∫—ñ –º–æ–≤–∏
            'tl': 'tgl_Latn',      # —Ç–∞–≥–∞–ª—å—Å—å–∫–∞ (—Ñ—ñ–ª—ñ–ø–ø—ñ–Ω—Å—å–∫–∞)
            'ceb': 'ceb_Latn',     # —Å–µ–±—É–∞–Ω–æ
            'ilo': 'ilo_Latn',     # —ñ–ª–æ–∫–∞–Ω—Å—å–∫–∞
            'hil': 'hil_Latn',     # —Ö—ñ–ª—ñ–≥–∞–π–Ω–æ–Ω
            'war': 'war_Latn',     # –≤–∞—Ä–∞–π
            'pam': 'pam_Latn',     # –ø–∞–º–ø–∞–Ω–≥–∞–Ω
            'pag': 'pag_Latn',     # –ø–∞–Ω–≥–∞—Å—ñ–Ω–∞–Ω—Å—å–∫–∞
            'bcl': 'bcl_Latn',     # –±—ñ–∫–æ–ª—å—Å—å–∫–∞
            
            # –¢–∏–±–µ—Ç–æ-–±—ñ—Ä–º–∞–Ω—Å—å–∫—ñ
            'bo': 'bod_Tibt',      # —Ç–∏–±–µ—Ç—Å—å–∫–∞
            'dz': 'dzo_Tibt',      # –¥–∑–æ–Ω–≥-–∫—Ö–∞ (–±—É—Ç–∞–Ω—Å—å–∫–∞)
            'ne': 'npi_Deva',      # –Ω–µ–ø–∞–ª—å—Å—å–∫–∞
            'new': 'new_Deva',     # –Ω–µ–≤–∞—Ä—Å—å–∫–∞
            
            # ============ –Ü–ù–î–Ü–ô–°–¨–ö–Ü –ú–û–í–ò ============
            
            # –Ü–Ω–¥–æ–∞—Ä—ñ–π—Å—å–∫—ñ –º–æ–≤–∏
            'hi': 'hin_Deva',      # –≥—ñ–Ω–¥—ñ
            'ur': 'urd_Arab',      # —É—Ä–¥—É
            'bn': 'ben_Beng',      # –±–µ–Ω–≥–∞–ª—å—Å—å–∫–∞
            'pa': 'pan_Guru',      # –ø–∞–Ω–¥–∂–∞–±—ñ
            'gu': 'guj_Gujr',      # –≥—É–¥–∂–∞—Ä–∞—Ç—ñ
            'mr': 'mar_Deva',      # –º–∞—Ä–∞—Ç—Ö—ñ
            'or': 'ory_Orya',      # –æ—Ä—ñ—è
            'as': 'asm_Beng',      # –∞—Å—Å–∞–º—Å—å–∫–∞
            'bho': 'bho_Deva',     # –±—Ö–æ–¥–∂–ø—É—Ä—ñ
            'mai': 'mai_Deva',     # –º–∞–π—Ç—Ö—ñ–ª—ñ
            'mag': 'mag_Deva',     # –º–∞–≥–∞—Ö—ñ
            'sa': 'san_Deva',      # —Å–∞–Ω—Å–∫—Ä–∏—Ç
            'sd': 'snd_Arab',      # —Å—ñ–Ω–¥—Ö—ñ
            'si': 'sin_Sinh',      # —Å—ñ–Ω–≥–∞–ª—å—Å—å–∫–∞
            'dv': 'div_Thaa',      # –º–∞–ª—å–¥—ñ–≤—Å—å–∫–∞
            
            # –î—Ä–∞–≤—ñ–¥—ñ–π—Å—å–∫—ñ –º–æ–≤–∏
            'ta': 'tam_Taml',      # —Ç–∞–º—ñ–ª—å—Å—å–∫–∞
            'te': 'tel_Telu',      # —Ç–µ–ª—É–≥—É
            'ml': 'mal_Mlym',      # –º–∞–ª–∞—è–ª–∞–º
            'kn': 'kan_Knda',      # –∫–∞–Ω–Ω–∞–¥–∞
            
            # ============ –ë–õ–ò–ó–¨–ö–û–°–•–Ü–î–ù–Ü –ú–û–í–ò ============
            
            # –°–µ–º—ñ—Ç—Å—å–∫—ñ –º–æ–≤–∏
            'ar': 'arb_Arab',      # –∞—Ä–∞–±—Å—å–∫–∞ (—Å—É—á–∞—Å–Ω–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–Ω–∞)
            'arz': 'arz_Arab',     # —î–≥–∏–ø–µ—Ç—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'acm': 'acm_Arab',     # –º–µ—Å–æ–ø–æ—Ç–∞–º—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'apc': 'apc_Arab',     # –ª–µ–≤–∞–Ω—Ç—ñ–π—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'acq': 'acq_Arab',     # —Ç–∞'—ñ–∑—ñ-–∞–¥–µ–Ω—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'ajp': 'ajp_Arab',     # –ø—ñ–≤–¥–µ–Ω–Ω–æ–ª–µ–≤–∞–Ω—Ç—ñ–π—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'ars': 'ars_Arab',     # –Ω–∞–¥–∂–¥—ñ –∞—Ä–∞–±—Å—å–∫–∞
            'ary': 'ary_Arab',     # –º–∞—Ä–æ–∫–∫–∞–Ω—Å—å–∫–∞ –∞—Ä–∞–±—Å—å–∫–∞
            'he': 'heb_Hebr',      # —ñ–≤—Ä–∏—Ç
            'mt': 'mlt_Latn',      # –º–∞–ª—å—Ç—ñ–π—Å—å–∫–∞
            'am': 'amh_Ethi',      # –∞–º—Ö–∞—Ä—Å—å–∫–∞
            'ti': 'tir_Ethi',      # —Ç–∏–≥—Ä–∏–Ω—å—è
            
            # –Ü—Ä–∞–Ω—Å—å–∫—ñ –º–æ–≤–∏
            'fa': 'pes_Arab',      # –ø–µ—Ä—Å—å–∫–∞ (—Ñ–∞—Ä—Å—ñ)
            'tg': 'tgk_Cyrl',      # —Ç–∞–¥–∂–∏—Ü—å–∫–∞
            'ps': 'pbt_Arab',      # –ø–∞—à—Ç–æ
            'ku': 'ckb_Arab',      # –∫—É—Ä–¥—Å—å–∫–∞ (—Å–æ—Ä–∞–Ω—ñ)
            'kmr': 'kmr_Latn',     # –∫—É—Ä–¥—Å—å–∫–∞ (–∫—É—Ä–º–∞–Ω–¥–∂—ñ)
            'os': 'oss_Cyrl',      # –æ—Å–µ—Ç–∏–Ω—Å—å–∫–∞
            
            # –¢—é—Ä–∫—Å—å–∫—ñ –º–æ–≤–∏
            'tr': 'tur_Latn',      # —Ç—É—Ä–µ—Ü—å–∫–∞
            'az': 'azj_Latn',      # –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å—å–∫–∞
            'kk': 'kaz_Cyrl',      # –∫–∞–∑–∞—Ö—Å—å–∫–∞
            'ky': 'kir_Cyrl',      # –∫–∏—Ä–≥–∏–∑—å–∫–∞
            'uz': 'uzn_Latn',      # —É–∑–±–µ—Ü—å–∫–∞
            'tk': 'tuk_Latn',      # —Ç—É—Ä–∫–º–µ–Ω—Å—å–∫–∞
            'tt': 'tat_Cyrl',      # —Ç–∞—Ç–∞—Ä—Å—å–∫–∞
            'ba': 'bak_Cyrl',      # –±–∞—à–∫–∏—Ä—Å—å–∫–∞
            'chv': 'chv_Cyrl',     # —á—É–≤–∞—Å—å–∫–∞
            'sah': 'sah_Cyrl',     # —è–∫—É—Ç—Å—å–∫–∞
            'tyv': 'tyv_Cyrl',     # —Ç—É–≤–∏–Ω—Å—å–∫–∞
            'ug': 'uig_Arab',      # —É–π–≥—É—Ä—Å—å–∫–∞
            
            # ============ –ö–ê–í–ö–ê–ó–¨–ö–Ü –ú–û–í–ò ============
            'ka': 'kat_Geor',      # –≥—Ä—É–∑–∏–Ω—Å—å–∫–∞
            'hy': 'hye_Armn',      # –≤—ñ—Ä–º–µ–Ω—Å—å–∫–∞
            'ab': 'abk_Cyrl',      # –∞–±—Ö–∞–∑—å–∫–∞
            'ce': 'che_Cyrl',      # —á–µ—á–µ–Ω—Å—å–∫–∞
            
            # ============ –ê–§–†–ò–ö–ê–ù–°–¨–ö–Ü –ú–û–í–ò ============
            
            # –ù—ñ–≥–µ—Ä–æ-–∫–æ–Ω–≥–æ–ª–µ–∑—å–∫—ñ –º–æ–≤–∏
            'sw': 'swh_Latn',      # —Å—É–∞—Ö—ñ–ª—ñ
            'yo': 'yor_Latn',      # –π–æ—Ä—É–±–∞
            'ig': 'ibo_Latn',      # —ñ–≥–±–æ
            'ha': 'hau_Latn',      # —Ö–∞—É—Å–∞
            'zu': 'zul_Latn',      # –∑—É–ª—É
            'xh': 'xho_Latn',      # –∫—Ö–æ—Å–∞
            'st': 'sot_Latn',      # —Å–µ—Å–æ—Ç–æ
            'tn': 'tsn_Latn',      # —Ç—Å–≤–∞–Ω–∞
            've': 'ven_Latn',      # –≤–µ–Ω–¥–∞
            'ts': 'tso_Latn',      # —Ç—Å–æ–Ω–≥–∞
            'ss': 'ssw_Latn',      # —Å–≤–∞–∑—ñ
            'nr': 'nbl_Latn',      # –ø—ñ–≤–¥–µ–Ω–Ω–∞ –Ω–¥–µ–±–µ–ª–µ
            'nso': 'nso_Latn',     # –ø—ñ–≤–Ω—ñ—á–Ω–∞ —Å–æ—Ç–æ
            'lg': 'lug_Latn',      # –ª—É–≥–∞–Ω–¥–∞
            'rw': 'kin_Latn',      # –∫—ñ–Ω—å—è—Ä—É–∞–Ω–¥–∞
            'rn': 'run_Latn',      # –∫—ñ—Ä—É–Ω–¥—ñ
            'sn': 'sna_Latn',      # —à–æ–Ω–∞
            'ny': 'nya_Latn',      # —á—ñ—á–µ–≤–∞
            'bem': 'bem_Latn',     # –±–µ–º–±–∞
            'lmo': 'lmo_Latn',     # –ª–æ–º–±–∞—Ä–¥—Å—å–∫–∞
            'vec': 'vec_Latn',     # –≤–µ–Ω–µ—Ç—Å—å–∫–∞
            'scn': 'scn_Latn',     # —Å–∏—Ü–∏–ª—ñ–π—Å—å–∫–∞
            'nap': 'nap_Latn',     # –Ω–µ–∞–ø–æ–ª—ñ—Ç–∞–Ω—Å—å–∫–∞
            'lij': 'lij_Latn',     # –ª—ñ–≥—É—Ä—ñ–π—Å—å–∫–∞
            'pms': 'pms_Latn',     # –ø'—î–º–æ–Ω—Ç—Å—å–∫–∞
            
            # –ù—ñ–ª–æ—Å–∞—Ö–∞—Ä—Å—å–∫—ñ –º–æ–≤–∏
            'so': 'som_Latn',      # —Å–æ–º–∞–ª—ñ–π—Å—å–∫–∞
            
            # ============ –ê–ú–ï–†–ò–ö–ê–ù–°–¨–ö–Ü –ú–û–í–ò ============
            'qu': 'quy_Latn',      # –∫–µ—á—É–∞
            'gn': 'grn_Latn',      # –≥—É–∞—Ä–∞–Ω—ñ
            'ay': 'aym_Latn',      # –∞–π–º–∞—Ä–∞
            'nah': 'nah_Latn',     # –Ω–∞—É–∞—Ç–ª—å
            
            # ============ –û–ö–ï–ê–ù–Ü–ô–°–¨–ö–Ü –ú–û–í–ò ============
            'mi': 'mri_Latn',      # –º–∞–æ—Ä—ñ
            'haw': 'haw_Latn',     # –≥–∞–≤–∞–π—Å—å–∫–∞
            'fj': 'fij_Latn',      # —Ñ—ñ–¥–∂—ñ–π—Å—å–∫–∞
            'sm': 'smo_Latn',      # —Å–∞–º–æ–∞–Ω—Å—å–∫–∞
            'to': 'ton_Latn',      # —Ç–æ–Ω–≥–∞–Ω—Å—å–∫–∞
            
            # ============ –®–¢–£–ß–ù–Ü –ú–û–í–ò ============
            'eo': 'epo_Latn',      # –µ—Å–ø–µ—Ä–∞–Ω—Ç–æ
            'ia': 'ina_Latn',      # —ñ–Ω—Ç–µ—Ä–ª—ñ–Ω–≥–≤–∞
            'ie': 'ile_Latn',      # –æ–∫—Ü–∏–¥–µ–Ω—Ç–∞–ª—å
            'vo': 'vol_Latn',      # –≤–æ–ª–∞–ø—é–∫
            'jbo': 'jbo_Latn',     # –ª–æ–∂–±–∞–Ω
            
            # ============ –ú–ï–†–¢–í–Ü –ú–û–í–ò ============
            'la': 'lat_Latn',      # –ª–∞—Ç–∏–Ω—Å—å–∫–∞
            'grc': 'grc_Grek',     # –¥–∞–≤–Ω—å–æ–≥—Ä–µ—Ü—å–∫–∞
            'got': 'got_Goth',     # –≥–æ—Ç—Å—å–∫–∞
            'ang': 'ang_Latn',     # –¥–∞–≤–Ω—å–æ–∞–Ω–≥–ª—ñ–π—Å—å–∫–∞
            'non': 'non_Latn',     # –¥–∞–≤–Ω—å–æ–Ω–æ—Ä–≤–µ–∑—å–∫–∞
            'cu': 'chu_Cyrl',      # —Ü–µ—Ä–∫–æ–≤–Ω–æ—Å–ª–æ–≤'—è–Ω—Å—å–∫–∞
            
            # ============ –†–ï–ì–Ü–û–ù–ê–õ–¨–ù–Ü –í–ê–†–Ü–ê–ù–¢–ò ============
            'pt-br': 'por_Latn',   # –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å—å–∫–∞ (–ë—Ä–∞–∑–∏–ª—ñ—è)
            'pt-pt': 'por_Latn',   # –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å—å–∫–∞ (–ü–æ—Ä—Ç—É–≥–∞–ª—ñ—è)
            'es-es': 'spa_Latn',   # —ñ—Å–ø–∞–Ω—Å—å–∫–∞ (–Ü—Å–ø–∞–Ω—ñ—è)
            'es-mx': 'spa_Latn',   # —ñ—Å–ø–∞–Ω—Å—å–∫–∞ (–ú–µ–∫—Å–∏–∫–∞)
            'en-us': 'eng_Latn',   # –∞–Ω–≥–ª—ñ–π—Å—å–∫–∞ (–°–®–ê)
            'en-gb': 'eng_Latn',   # –∞–Ω–≥–ª—ñ–π—Å—å–∫–∞ (–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω—ñ—è)
            'fr-fr': 'fra_Latn',   # —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫–∞ (–§—Ä–∞–Ω—Ü—ñ—è)
            'fr-ca': 'fra_Latn',   # —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫–∞ (–ö–∞–Ω–∞–¥–∞)
            
            # ============ –î–û–î–ê–¢–ö–û–í–Ü ISO –ö–û–î–ò ============
            'srp': 'srp_Cyrl',     # —Å–µ—Ä–±—Å—å–∫–∞ (ISO 639-3)
            'hrv': 'hrv_Latn',     # —Ö–æ—Ä–≤–∞—Ç—Å—å–∫–∞ (ISO 639-3)
            'bos': 'bos_Latn',     # –±–æ—Å–Ω—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'mon': 'khk_Cyrl',     # –º–æ–Ω–≥–æ–ª—å—Å—å–∫–∞
            'mn': 'khk_Cyrl',      # –º–æ–Ω–≥–æ–ª—å—Å—å–∫–∞ (—Å–∫–æ—Ä–æ—á–µ–Ω–æ)
            'deu': 'deu_Latn',     # –Ω—ñ–º–µ—Ü—å–∫–∞ (ISO 639-3)
            'fra': 'fra_Latn',     # —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫–∞ (ISO 639-3)
            'spa': 'spa_Latn',     # —ñ—Å–ø–∞–Ω—Å—å–∫–∞ (ISO 639-3)
            'ita': 'ita_Latn',     # —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'por': 'por_Latn',     # –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å—å–∫–∞ (ISO 639-3)
            'rus': 'rus_Cyrl',     # —Ä–æ—Å—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'ukr': 'ukr_Cyrl',     # —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (ISO 639-3)
            'pol': 'pol_Latn',     # –ø–æ–ª—å—Å—å–∫–∞ (ISO 639-3)
            'ces': 'ces_Latn',     # —á–µ—Å—å–∫–∞ (ISO 639-3)
            'slk': 'slk_Latn',     # —Å–ª–æ–≤–∞—Ü—å–∫–∞ (ISO 639-3)
            'hun': 'hun_Latn',     # —É–≥–æ—Ä—Å—å–∫–∞ (ISO 639-3)
            'ron': 'ron_Latn',     # —Ä—É–º—É–Ω—Å—å–∫–∞ (ISO 639-3)
            'bul': 'bul_Cyrl',     # –±–æ–ª–≥–∞—Ä—Å—å–∫–∞ (ISO 639-3)
            'ell': 'ell_Grek',     # –≥—Ä–µ—Ü—å–∫–∞ (ISO 639-3)
            'tur': 'tur_Latn',     # —Ç—É—Ä–µ—Ü—å–∫–∞ (ISO 639-3)
            'ara': 'arb_Arab',     # –∞—Ä–∞–±—Å—å–∫–∞ (ISO 639-3)
            'heb': 'heb_Hebr',     # —ñ–≤—Ä–∏—Ç (ISO 639-3)
            'fas': 'pes_Arab',     # –ø–µ—Ä—Å—å–∫–∞ (ISO 639-3)
            'hin': 'hin_Deva',     # –≥—ñ–Ω–¥—ñ (ISO 639-3)
            'ben': 'ben_Beng',     # –±–µ–Ω–≥–∞–ª—å—Å—å–∫–∞ (ISO 639-3)
            'tam': 'tam_Taml',     # —Ç–∞–º—ñ–ª—å—Å—å–∫–∞ (ISO 639-3)
            'tel': 'tel_Telu',     # —Ç–µ–ª—É–≥—É (ISO 639-3)
            'mar': 'mar_Deva',     # –º–∞—Ä–∞—Ç—Ö—ñ (ISO 639-3)
            'guj': 'guj_Gujr',     # –≥—É–¥–∂–∞—Ä–∞—Ç—ñ (ISO 639-3)
            'kan': 'kan_Knda',     # –∫–∞–Ω–Ω–∞–¥–∞ (ISO 639-3)
            'mal': 'mal_Mlym',     # –º–∞–ª–∞—è–ª–∞–º (ISO 639-3)
            'pan': 'pan_Guru',     # –ø–∞–Ω–¥–∂–∞–±—ñ (ISO 639-3)
            'urd': 'urd_Arab',     # —É—Ä–¥—É (ISO 639-3)
            'nep': 'npi_Deva',     # –Ω–µ–ø–∞–ª—å—Å—å–∫–∞ (ISO 639-3)
            'sin': 'sin_Sinh',     # —Å—ñ–Ω–≥–∞–ª—å—Å—å–∫–∞ (ISO 639-3)
            'tha': 'tha_Thai',     # —Ç–∞–π—Å—å–∫–∞ (ISO 639-3)
            'lao': 'lao_Laoo',     # –ª–∞–æ—Å—å–∫–∞ (ISO 639-3)
            'mya': 'mya_Mymr',     # –±—ñ—Ä–º–∞–Ω—Å—å–∫–∞ (ISO 639-3)
            'khm': 'khm_Khmr',     # –∫—Ö–º–µ—Ä—Å—å–∫–∞ (ISO 639-3)
            'vie': 'vie_Latn',     # –≤'—î—Ç–Ω–∞–º—Å—å–∫–∞ (ISO 639-3)
            'ind': 'ind_Latn',     # —ñ–Ω–¥–æ–Ω–µ–∑—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'msa': 'zsm_Latn',     # –º–∞–ª–∞–π—Å—å–∫–∞ (ISO 639-3)
            'tgl': 'tgl_Latn',     # —Ç–∞–≥–∞–ª—å—Å—å–∫–∞ (ISO 639-3)
            'jpn': 'jpn_Jpan',     # —è–ø–æ–Ω—Å—å–∫–∞ (ISO 639-3)
            'kor': 'kor_Hang',     # –∫–æ—Ä–µ–π—Å—å–∫–∞ (ISO 639-3)
            'zho': 'zho_Hans',     # –∫–∏—Ç–∞–π—Å—å–∫–∞ (ISO 639-3)
            'swe': 'swe_Latn',     # —à–≤–µ–¥—Å—å–∫–∞ (ISO 639-3)
            'dan': 'dan_Latn',     # –¥–∞–Ω—Å—å–∫–∞ (ISO 639-3)
            'nor': 'nob_Latn',     # –Ω–æ—Ä–≤–µ–∑—å–∫–∞ (ISO 639-3)
            'fin': 'fin_Latn',     # —Ñ—ñ–Ω—Å—å–∫–∞ (ISO 639-3)
            'est': 'est_Latn',     # –µ—Å—Ç–æ–Ω—Å—å–∫–∞ (ISO 639-3)
            'lav': 'lav_Latn',     # –ª–∞—Ç–≤—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'lit': 'lit_Latn',     # –ª–∏—Ç–æ–≤—Å—å–∫–∞ (ISO 639-3)
            'slv': 'slv_Latn',     # —Å–ª–æ–≤–µ–Ω—Å—å–∫–∞ (ISO 639-3)
            'hrv': 'hrv_Latn',     # —Ö–æ—Ä–≤–∞—Ç—Å—å–∫–∞ (ISO 639-3)
            'srp': 'srp_Cyrl',     # —Å–µ—Ä–±—Å—å–∫–∞ (ISO 639-3)
            'bos': 'bos_Latn',     # –±–æ—Å–Ω—ñ–π—Å—å–∫–∞ (ISO 639-3)
            'mkd': 'mkd_Cyrl',     # –º–∞–∫–µ–¥–æ–Ω—Å—å–∫–∞ (ISO 639-3)
            'bel': 'bel_Cyrl',     # –±—ñ–ª–æ—Ä—É—Å—å–∫–∞ (ISO 639-3)
            'kat': 'kat_Geor',     # –≥—Ä—É–∑–∏–Ω—Å—å–∫–∞ (ISO 639-3)
            'hye': 'hye_Armn',     # –≤—ñ—Ä–º–µ–Ω—Å—å–∫–∞ (ISO 639-3)
            'kaz': 'kaz_Cyrl',     # –∫–∞–∑–∞—Ö—Å—å–∫–∞ (ISO 639-3)
            'kir': 'kir_Cyrl',     # –∫–∏rg–∏–∑—å–∫–∞ (ISO 639-3)
            'uzb': 'uzn_Latn',     # —É–∑–±–µ—Ü—å–∫–∞ (ISO 639-3)
            'tgk': 'tgk_Cyrl',     # —Ç–∞–¥–∂–∏—Ü—å–∫–∞ (ISO 639-3)
            'tuk': 'tuk_Latn',     # —Ç—É—Ä–∫–º–µ–Ω—Å—å–∫–∞ (ISO 639-3)
            'aze': 'azj_Latn',     # –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å—å–∫–∞ (ISO 639-3)
            'afr': 'afr_Latn',     # –∞—Ñ—Ä–∏–∫–∞–∞–Ω—Å (ISO 639-3)
            'swa': 'swh_Latn',     # —Å—É–∞—Ö—ñ–ª—ñ (ISO 639-3)
            'yor': 'yor_Latn',     # –π–æ—Ä—É–±–∞ (ISO 639-3)
            'hau': 'hau_Latn',     # —Ö–∞—É—Å–∞ (ISO 639-3)
            'ibo': 'ibo_Latn',     # —ñ–≥–±–æ (ISO 639-3)
            'zul': 'zul_Latn',     # –∑—É–ª—É (ISO 639-3)
            'xho': 'xho_Latn',     # –∫—Ö–æ—Å–∞ (ISO 639-3)
            'amh': 'amh_Ethi',     # –∞–º—Ö–∞—Ä—Å—å–∫–∞ (ISO 639-3)
            'som': 'som_Latn',     # —Å–æ–º–∞–ª—ñ–π—Å—å–∫–∞ (ISO 639-3)
        }    
    def detect_language(self, text: str) -> Optional[str]:
        """
        –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏ —Ç–µ–∫—Å—Ç—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º langdetect
        """
        if not text.strip():
            return 'eng_Latn'
        
        mapping = self.get_language_mapping()
        
        try:
            detected = detect(text.lower())
            print(f"üîç langdetect –≤–∏–∑–Ω–∞—á–∏–≤: {detected}")
            
            # –ú–∞–ø–∏–º–æ –Ω–∞ NLLB –∫–æ–¥
            nllb_code = mapping.get(detected)
            if nllb_code:
                return nllb_code
            else:
                print(f"‚ö†Ô∏è  –ú–æ–≤–∞ '{detected}' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞ –≤ –º–∞–ø–ø—ñ–Ω–≥—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É")
                return 'eng_Latn'
                
        except Error as e:
            print(f"‚ö†Ô∏è  langdetect –ø–æ–º–∏–ª–∫–∞: {e}, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É")
            return 'eng_Latn'
    
    def translate_to_ukrainian(self, text: str, source_lang: Optional[str] = None, max_length: int = 400) -> tuple:
        """
        –ü–µ—Ä–µ–∫–ª–∞–¥–∞—î —Ç–µ–∫—Å—Ç –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É –º–æ–≤—É
        
        Args:
            text (str): –¢–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É
            source_lang (str, optional): –ö–æ–¥ –º–æ–≤–∏ –¥–∂–µ—Ä–µ–ª–∞ (—è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ - –∞–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è)
            max_length (int): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É
        
        Returns:
            tuple: (–ø–µ—Ä–µ–∫–ª–∞–¥, –≤–∏–∑–Ω–∞—á–µ–Ω–∞_–º–æ–≤–∞)
        """
        try:
            # –í–∏–∑–Ω–∞—á–∞—î–º–æ –º–æ–≤—É –¥–∂–µ—Ä–µ–ª–∞ —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–∞
            if not source_lang:
                source_lang = self.detect_language(text)
                print(f"üîç –í–∏–∑–Ω–∞—á–µ–Ω–æ –º–æ–≤—É: {source_lang}")
            
            # –Ø–∫—â–æ —Ç–µ–∫—Å—Ç –≤–∂–µ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é - –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —è–∫ —î
            if source_lang == self.target_lang:
                return text, source_lang
            
            # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –º–æ–≤–∞
            if source_lang not in self.tokenizer.lang_code_to_id:
                return f"‚ùå –ú–æ–≤–∞ '{source_lang}' –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –º–æ–¥–µ–ª–ª—é", source_lang
            
            # –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç—É
            inputs = self.tokenizer(text, return_tensors="pt").to(self.device)
            
            # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ç–æ–∫–µ–Ω —Ü—ñ–ª—å–æ–≤–æ—ó –º–æ–≤–∏ (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞)
            forced_bos_token_id = self.tokenizer.lang_code_to_id[self.target_lang]
            
            # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–µ—Ä–µ–∫–ª–∞–¥—É
            with torch.no_grad():
                generated_tokens = self.model.generate(
                    **inputs,
                    forced_bos_token_id=forced_bos_token_id,
                    max_length=max_length,
                    num_beams=5,
                    length_penalty=1.0,
                    early_stopping=True,
                    do_sample=True,
                    temperature=0.7
                )
            
            # –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
            translation = self.tokenizer.batch_decode(
                generated_tokens, skip_special_tokens=True
            )[0]
            
            return translation, source_lang
            
        except Exception as e:
            return f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É: {str(e)}", source_lang or "unknown"

def main():
    """–û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è"""
    print("üá∫üá¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É –º–æ–≤—É")
    print("üåê –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è NLLB-200-3.3B")
    print("=" * 60)
    
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á
    translator = NLLBToUkrainianTranslator()
    
    # –ü—Ä–∏–∫–ª–∞–¥–∏ –ø–µ—Ä–µ–∫–ª–∞–¥—É –∑ —Ä—ñ–∑–Ω–∏—Ö –º–æ–≤
    examples = [
        "Hello, how are you today? I hope everything is going well!",
        "Bonjour! Comment √ßa va? J'esp√®re que vous allez bien.",
        "Hola, ¬øc√≥mo est√°s? Espero que tengas un buen d√≠a.",
        "Guten Tag! Wie geht es Ihnen? Ich hoffe, alles ist in Ordnung.",
        "Ciao! Come stai? Spero che tu stia bene oggi.",
        "‰Ω†Â•ΩÔºÅ‰Ω†‰ªäÂ§©ÊÄé‰πàÊ†∑ÔºüÂ∏åÊúõ‰Ω†‰∏ÄÂàáÈÉΩÂ•ΩÔºÅ",
        "„Åì„Çì„Å´„Å°„ÅØÔºÅÂÖÉÊ∞ó„Åß„Åô„ÅãÔºü‰ªäÊó•„ÅØ„ÅÑ„ÅÑÊó•„Å´„Å™„Çä„Åù„ÅÜ„Åß„Åô„Å≠„ÄÇ",
        "ÏïàÎÖïÌïòÏÑ∏Ïöî! Ïò§Îäò Ïñ¥ÎñªÍ≤å ÏßÄÎÇ¥ÏÑ∏Ïöî? Ï¢ãÏùÄ ÌïòÎ£® ÎêòÏÑ∏Ïöî!",
        "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –ù–∞–¥–µ—é—Å—å, —É —Ç–µ–±—è –≤—Å—ë —Ö–æ—Ä–æ—à–æ.",
        "Cze≈õƒá! Jak siƒô masz? Mam nadziejƒô, ≈ºe wszystko w porzƒÖdku.",
        "Ol√°! Como voc√™ est√°? Espero que esteja tudo bem!",
    ]
    
    print(f"\nüîÑ –ü—Ä–∏–∫–ª–∞–¥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É:")
    print("=" * 60)
    
    for i, text in enumerate(examples, 1):
        print(f"\nüìù –ü—Ä–∏–∫–ª–∞–¥ {i}:")
        print(f"–û—Ä–∏–≥—ñ–Ω–∞–ª: {text}")
        print("üîÑ –ü–µ—Ä–µ–∫–ª–∞–¥–∞—î–º–æ...")
        
        translation, detected_lang = translator.translate_to_ukrainian(text)
        
        print(f"üîç –ú–æ–≤–∞: {detected_lang}")
        print(f"üá∫üá¶ –ü–µ—Ä–µ–∫–ª–∞–¥: {translation}")
        print("-" * 50)
    
    # –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º
    print(f"\nüéØ –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª–∞–¥—É")
    print("–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –±—É–¥—å-—è–∫–æ—é –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–æ—é –º–æ–≤–æ—é")
    print("(–∞–±–æ 'exit' –¥–ª—è –≤–∏—Ö–æ–¥—É)")
    
    while True:
        try:
            text = input("\nüìù –í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç: ").strip()
            if text.lower() in ['exit', 'quit', '–≤–∏—Ö—ñ–¥']:
                break
                
            if not text:
                continue
            
            # –ó–∞–ø–∏—Ç—É—î–º–æ —á–∏ –≤–∫–∞–∑–∞—Ç–∏ –º–æ–≤—É –≤—Ä—É—á–Ω—É
            manual_lang = input("üî§ –í–∫–∞–∑–∞—Ç–∏ –º–æ–≤—É –≤—Ä—É—á–Ω—É? (Enter –¥–ª—è –∞–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è): ").strip()
            source_lang = manual_lang if manual_lang else None
                
            print("üîÑ –ü–µ—Ä–µ–∫–ª–∞–¥–∞—î–º–æ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É...")
            translation, detected_lang = translator.translate_to_ukrainian(text, source_lang)
            
            print(f"üîç –ú–æ–≤–∞ –¥–∂–µ—Ä–µ–ª–∞: {detected_lang}")
            print(f"üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥: {translation}")
            
        except KeyboardInterrupt:
            break
        except Exception as e:
            print(f"‚ùå –ü–æ–º–∏–ª–∫–∞: {e}")
    
    print("\nüëã –î—è–∫—É—é –∑–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á–∞!")
    print("üá∫üá¶ –°–ª–∞–≤–∞ –£–∫—Ä–∞—ó–Ω—ñ!")

if __name__ == "__main__":
    main()