# docker

## Збірка та запуск

Для збірки контейнеру використовуйте наступну команду:


```bash
docker build -t deepface:latest .

```

Для запуску контейнеру, який містить налаштоване середовище для роботи з deepFace, використовуйте наступну команду:


```bash
docker run -it --rm -v $PWD:/app/deepface deepface:latest bash

```

## Зміна місця зберігання даних Docker в Ubuntu

Щоб змінити місце зберігання даних Docker в Ubuntu, ви можете налаштувати Docker для використання іншого каталогу. Це може бути корисно, якщо у вас є обмеження на простір на диску або ви хочете організувати дані Docker в окремому розділі. Ось докладний крок за кроком процес:

### 1. Створіть новий каталог для даних Docker

Спочатку створіть новий каталог для зберігання даних Docker. Наприклад, ви можете створити каталог на іншому розділі або диску.

```bash
sudo mkdir -p /path/to/new/docker
```

### 2. Зупиніть Docker службу

Перед зміною конфігураційних налаштувань потрібно зупинити Docker службу, щоб уникнути потенційних проблем із доступом до файлів.

```bash
sudo systemctl stop docker
```

### 3. Перемістіть існуючі дані Docker (це не працює)

Перемістіть існуючі дані Docker до нового каталогу. Це важливий крок, щоб зберегти всі ваші образи, контейнери і тому подібне.

```bash
sudo rsync -aP /var/lib/docker/ /path/to/new/docker
```

!УВАГА: якщо переносити старі дані, то нічого не працює, тому створений каталого має бути порожнім.

### 4. Налаштуйте Docker для використання нового каталогу

Існує кілька способів змінити каталог зберігання даних Docker. Один з найбільш поширених методів – змінити конфігурацію Docker демона. Це можна зробити, редагуючи конфігураційний файл `daemon.json`.

1. **Створіть або відредагуйте файл `/etc/docker/daemon.json`:**

```bash
sudo nano /etc/docker/daemon.json
```

2. **Додайте або змініть наступний JSON-код у файлі, щоб вказати новий каталог:**

```json
{
  "data-root": "/mnt/data/data/docker"
}
```

   Збережіть файл і закрийте редактор.

### 5. Запустіть Docker службу знову

Після зміни конфігурації запустіть Docker службу знову.

```bash
sudo systemctl start docker
```

### 6. Перевірте, що Docker використовує новий каталог

Ви можете перевірити, чи Docker використовує новий каталог, переглянувши налаштування Docker або перевіривши директорії.

```bash
docker info | grep "Docker Root Dir"
```

Ця команда повинна вивести новий шлях до каталогу зберігання даних.

### 7. Перевірте, чи всі дані перенесені правильно

Переконайтеся, що всі ваші образи, контейнери та інші дані доступні в новому каталозі. Ви можете перевірити, чи є ваші образи, запустивши:

```bash
docker images
```

І перевірити наявність ваших контейнерів:

```bash
docker ps -a
```

### 8. Очистіть старий каталог (опціонально)

Якщо все працює як слід, і ви впевнені, що старий каталог більше не потрібен, ви можете його видалити, щоб звільнити місце на диску.

```bash
sudo rm -rf /var/lib/docker
```

Цей процес дозволяє вам змінити місце зберігання даних Docker, забезпечуючи більшу гнучкість і управління дисковим простором на вашій системі.